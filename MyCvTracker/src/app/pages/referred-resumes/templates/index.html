<section
  id="referral"
  ng-controller="ReferredResumesCtrl">
  <div class="body-section list-resumes-section">
    <div class="section-content">
      <div class="row">
        <div class="col-xs-12" ng-if="referredResumes.detail.referralType !== 'TEXT_LINK'">
          <div
            ba-panel
            ba-panel-class="xsmall-panel light-text spec-detail-panel">
            <h4>
              {{ referredResumes.detail.referralTargetSubject }}
            </h4>

            <div class="target-email">
              Target email: {{ referredResumes.detail.referralTargetEmail }}
            </div>
          </div>
        </div>
        <div
          ng-if="!referredResumes.matchingType"
          ng-repeat="aResume in referredResumes.list track by aResume.id"
          class="col-xs-12 col-md-3">
          <div
            ba-panel
            ba-panel-class="xsmall-panel light-text resume-panel">
            <div class="tile-title">
              <h3
                class="resume-title"
                ng-bind="aResume.resumeTitle"></h3>
              <hr class="resumeSeprator">
              <div class="tile-filename">
                  <span
                    class="badge badge-warning"
                    ng-if="aResume.resumeStatus === JOB_STATUS.APPLIED_JOB">Job Applied</span>
                <span
                  class="badge badge-warning"
                  ng-if="aResume.resumeStatus === JOB_STATUS.SELECTED_FOR_INTERVIEW">Selected for interview</span>
                <span
                  class="badge badge-danger"
                  ng-if="aResume.resumeStatus === JOB_STATUS.REJECTED_FOR_INTERVIEW">Rejected for interview</span>
                <span
                  class="badge badge-danger"
                  ng-if="aResume.resumeStatus === JOB_STATUS.REJECTED_FOR_JOB">Rejected for job</span>
                <span
                  class="badge badge-success"
                  ng-if="aResume.resumeStatus === JOB_STATUS.SELECTED_FOR_JOB">Selected for job</span>
                <span ng-if="aResume.sharedWith === SHARED_LEVEL.PARENT" class="badge badge-info">Shared To Parent</span>
                <span ng-if="aResume.sharedWith === SHARED_LEVEL.JOB_POSTER" class="badge badge-info">Shared To Poster</span>
              </div>
              <div class="user-email">
                Owner: {{ aResume.ownerEmail }}
              </div>
              <div
                class="tile-datetime"
                ng-bind="formatDateTime(aResume.uploadedAt)"></div>
              <div class="controls">
                <a
                  href="#"
                  title="Download"
                  ng-click="downloadMyResume(aResume.id)">
                  <i class="fa fa-download"></i>
                </a>
                <a
                  href="#"
                  title="Preview"
                  ng-click="openPreviewResume(aResume.id, aResume.fileType)">
                  <i class="fas fa-search"></i>
                </a>
                <a
                  ng-if="referredResumes.detail.referralType === 'JOB_SPEC' && ableToShare(aResume.sharedWith)"
                  href="#"
                  ng-attr-title='{{ isShareToTarget(aResume.sharedWith) ? "Share to target" : "Share to parent"}}'
                  ng-click="openShareResumeModal(aResume)">
                  <i class="fas fa-external-link-square-alt"></i>
                </a>
                <a
                  ng-if="ableToUpdate(aResume.sharedWith, aResume.resumeStatus)"
                  href="#"
                  title="Update Status"
                  ng-click="openStatusModal(aResume)">
                  <i class="fas fa-edit"></i>
                </a>
              </div>
            </div>
          </div>
        </div>

        <div
          ng-if="referredResumes.matchingType"
          ng-repeat="aMatchingResume in referredResumes.list track by aMatchingResume.id"
          ng-init="aResume = aMatchingResume.resumeDetail"
          class="col-xs-12 col-md-3">
          <div
            ba-panel
            ba-panel-class="xsmall-panel light-text resume-panel">
            <div class="tile-title">
              <h3
                class="resume-title"
                ng-bind="aResume.resumeTitle ? aResume.resumeTitle : '-'"></h3>
              <hr class="resumeSeprator">
              <div class="user-email">
                Owner: {{ aResume.ownerEmail }}
              </div>
              <div class="matching-percent">
                <a href="#" ng-click="openMatchingSkillModal(aMatchingResume.id)">Matching {{ getMatchPercentage(aMatchingResume.noOfMatching, aResume.noOfSkills) }}% skills</a>
              </div>
              <div
                class="tile-datetime"
                ng-bind="formatDateTime(aResume.uploadedAt)"></div>
              <div class="controls">
                <a
                  href="#"
                  title="Download"
                  ng-click="downloadMyResume(aResume.id)">
                  <i class="fa fa-download"></i>
                </a>
                <a
                  href="#"
                  title="Preview"
                  ng-click="openPreviewResume(aResume.id, aResume.fileType)">
                  <i class="fas fa-search"></i>
                </a>
                <a
                  ng-if="referredResumes.detail.referralType === 'JOB_SPEC' && ableToShare(aResume.sharedWith)"
                  href="#"
                  ng-attr-title='{{ isShareToTarget(aResume.sharedWith) ? "Share to target" : "Share to parent"}}'
                  ng-click="openShareResumeModal(aResume)">
                  <i class="fas fa-external-link-square-alt"></i>
                </a>
                <a
                  ng-if="ableToUpdate(aResume.sharedWith, aResume.resumeStatus)"
                  href="#"
                  title="Update Status"
                  ng-click="openStatusModal(aResume)">
                  <i class="fas fa-edit"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
